<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title> River Ridge Ranch Site </title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />


<style>
	#map {
	position: absolute;
	top:0;
	right:0;
	bottom:0;
	left:0;
}
            
    
.info {
		padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.8);
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        border-radius: 5px;
      }
.legend {
         text-align: left;
         line-height: 25px;
         color: #555;
        }

.legend i {
           width: 22px;
           height: 22px;
           float: left;
	       margin-right: 8px;
           opacity: 0;
          }

.leaflet-container .leaflet-control-mouseposition {
  background-color: rgba(255, 255, 255, 0.7);
  box-shadow: 0 0 5px #bbb;
  padding: 0 5px;
  margin:0;
  color: #333;
  font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
		  

</style>

</head>


<body>
<div id="map"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> 
<script src="sketchfab-viewer-1.0.0.js"></script>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script>

	
	
	
    //LAYER STYLES
    
    function riverStyle(feature){
        return{
            "color": "#00fdfd",
            "weight": 4,
            "opacity": 1
        }
    };
    
    function boundaryStyle(feature){
        return{
            "fillColor": "#edc050",
            "color": "#42f445",
            "weight": 6,
            "opacity": 1,
            "fillOpacity": 0.40
        }
    };
	
	function pastureStyle(feature){
		return{
            "fillColor": "#d64f22",
            "color": "#ffffff",
            "weight": 6,
            "opacity": 1,
            "fillOpacity": 0.40
		}
	};
	
	function treeStyle(features){
		return{
		"color": "#d3101a"
		}
	};
	
	

    
    
	//ADD GEOJSONS
	
	
	

	var pastures;
	
	
	function highlightFeature1(e) {
		var layer = e.target;
		
		layer.setStyle({
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
		});
	}
	
	function resetHighlight1(e) {
		pastures.resetStyle(e.target);
	}
    
	function highlight1(feature, layer) {
		layer.on({
			mouseover: highlightFeature1,
			mouseout: resetHighlight1
		});
	}
	
	
	$.ajax({
		url: "https://raw.githubusercontent.com/Seanreseigh1/MSGISci-Webmap-New/master/Pastures.geojson",
		dataType: 'json',
		success: function (response) {
			pastures = L.geoJson(response, {style: pastureStyle, onEachFeature: highlight1}).bindPopup("This Polygon includes the extent of all the patures");
			//pastures.addTo(map);
			layercontrol.addOverlay(pastures, 'All Pastures')
		}
	});
	
	
	
	var propboundary;
	
	function highlightFeature2(e) {
		var layer = e.target;
		
		layer.setStyle({
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
		});
	}
	
	function resetHighlight2(e) {
		propboundary.resetStyle(e.target);
	}
    
	function highlight2(feature, layer) {
		layer.on({
			mouseover: highlightFeature2,
			mouseout: resetHighlight2
		});
	}
	
	$.ajax({
		url: "https://raw.githubusercontent.com/Seanreseigh1/MSGISci-Webmap-New/master/RR_boundary.geojson",
		dataType: 'json',
		success: function (response) {
			propboundary = L.geoJson(response, {style: boundaryStyle, onEachFeature: highlight2}).bindPopup("Property Boundary");
			propboundary.addTo(map);
			layercontrol.addOverlay(propboundary, 'River Ridge Ranch Boundary')
		}
	});
	
	
	
	
	var Tule_river;
	
	function highlightFeature3(e) {
		var layer = e.target;
		
		layer.setStyle({
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
		});
	}
	
	function resetHighlight3(e) {
		Tule_river.resetStyle(e.target);
	}
    
	function highlight3(feature, layer) {
		layer.on({
			mouseover: highlightFeature3,
			mouseout: resetHighlight3
		});
	}
	
	$.ajax({
		url: "https://raw.githubusercontent.com/Seanreseigh1/MSGISci-Webmap-New/master/Tule_river.geojson",
		dataType: 'json',
		success: function (response) {
			Tule_river = L.geoJson(response, {style: riverStyle, onEachFeature: highlight3}).bindPopup("This is the Tule River");
			//Tule_river.addTo(map);
			layercontrol.addOverlay(Tule_river, "Tule River")
		}
	});
	
	
	var trees ;
	
	
	$.ajax({
		url: "https://raw.githubusercontent.com/Seanreseigh1/MSGISci-Webmap-New/master/Tree_points.geojson",
		dataType: 'json',
		success: function(response) {
			trees = L.geoJson(response, {style: treeStyle})
			//Tule_river.addTo(map);
			layercontrol.addOverlay(trees, "Study Trees")
		}
	});
	
	

	
	
	
	
	//SET MAPVIEW

	
	
	
	
	var map = L.map('map', {
		center: [36.155983, -118.793571],
		zoom: 15,
	});
	
	map.on('zoomend', function () {
		if (map.getZoom() > 15 && map.hasLayer(propboundary)) {
			map.removeLayer(propboundary);
		}
		else {
			map.addLayer(propboundary);
		}
	});
	

		
	
	
	
	
	
	
	
	//SET BASEMAPS
	
	var Mapbox = L.tileLayer('https://api.mapbox.com/styles/v1/seanreseigh1/cjif8mg331hgj2srtdd4ekuir/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2VhbnJlc2VpZ2gxIiwiYSI6ImNqZ3p3anlvZTAxejYycW80cnhrYWRmZjkifQ.5ZvsDBz6Vw_plI3oo1aYDA', {maxZoom: 25, maxNativeZoom: 18}).addTo(map),
		Black_and_white = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>', maxZoom: 20, maxNativeZoom: 18}).addTo(map),
		Topo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)', maxZoom: 20, maxNativeZoom: 18}).addTo(map),
		Thunder = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}{r}.{ext}', {attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>', maxZoom: 20, maxNativeZoom: 18, subdomains: 'abcd',ext: 'png'}).addTo(map);
	
	

	
	
	
//ADD MARKERS AND LAYER CONTROLS
	
	
	
	//var site = L.marker([36.162660, -118.799860]).addTo(map).bindPopup('<a href="http://www.river-ridge.net/">Visit the River Ridge Ranch Site</a>'),
	//	cow = L.marker([36.160757, -118.797696]).addTo(map).bindPopup('<b>Tree</b>\n<iframe src="https://sketchfab.com/models/1e84bfc2489b433d951478f79fc7952f/embed?api_version=1.0.0&amp;api_id=653823281153884&amp;ui_infos=0&amp;ui_controls=0&amp;ui_stop=0" id="api-frame" allowfullscreen="" mozallowfullscreen="true" webkitallowfullscreen="true" width="400px" height="200px"></iframe><b><div><img src="https://i.imgur.com/yuyzanK.jpg" height="150px" width="150px"/></b>',
	//	{maxWidth : "auto"});
	
        //var iframe = document.getElementById( 'api-frame' );
        //var version = '1.0.0';
        //var urlid = '1e84bfc2489b433d951478f79fc7952f';
        //var client = new Sketchfab( version, iframe ).addTo(map);

        //client.init( urlid, {
          //  success: function onSuccess( api ){
                //API is ready to use
            //    api.start();
            //},
            //error: function onError() {
              //  console.log( 'Viewer error' );
            //},
            //ui_infos: 0,
            //ui_controls: 0,
            //ui_stop: 0,
        //} );
		
		
		
		
	//var popups = L.layerGroup([site, cow]);
    
   
	var basemaps = {
		"Black and White" : Black_and_white,
		"Topographic" : Topo,
		"Watercolor" : Thunder,
		"Mapbox": Mapbox,
	};


	var layercontrol = L.control.layers(basemaps)
	layercontrol.addTo(map);
	
	
	
	
	//LEGEND
	
	var legend = L.control({position: 'bottomright'});
		legend.onAdd = function(map){
		var div = L.DomUtil.create('div', 'info legend');
		labels = [
			"Tule River",
			"River Ridge Ranch Boundary",
		];
        
		div.innerHTML = labels.join('<br>');
		return div;
		};
	legend.addTo(map);
    
    
    
	
	
	//EXTRA CONTROLS
    
   	L.control.scale(position= 'bottomleft', maxWidth= 100, imperial= true).addTo(map);
	
	L.Control.MousePosition = L.Control.extend({
  options: {
    position: 'bottom',
    separator: ' : ',
    emptyString: 'Unavailable',
    lngFirst: false,
    numDigits: 5,
    lngFormatter: undefined,
    latFormatter: undefined,
    prefix: ""
  },

  onAdd: function (map) {
    this._container = L.DomUtil.create('div', 'leaflet-control-mouseposition');
    L.DomEvent.disableClickPropagation(this._container);
    map.on('mousemove', this._onMouseMove, this);
    this._container.innerHTML=this.options.emptyString;
    return this._container;
  },

  onRemove: function (map) {
    map.off('mousemove', this._onMouseMove)
  },

  _onMouseMove: function (e) {
    var lng = this.options.lngFormatter ? this.options.lngFormatter(e.latlng.lng) : L.Util.formatNum(e.latlng.lng, this.options.numDigits);
    var lat = this.options.latFormatter ? this.options.latFormatter(e.latlng.lat) : L.Util.formatNum(e.latlng.lat, this.options.numDigits);
    var value = this.options.lngFirst ? lng + this.options.separator + lat : lat + this.options.separator + lng;
    var prefixAndValue = this.options.prefix + ' ' + value;
    this._container.innerHTML = prefixAndValue;
  }

});

L.Map.mergeOptions({
    positionControl: false
});

L.Map.addInitHook(function () {
    if (this.options.positionControl) {
        this.positionControl = new L.Control.MousePosition();
        this.addControl(this.positionControl);
    }
});

L.control.mousePosition = function (options) {
    return new L.Control.MousePosition(options);
};




	


</script>

</body>
</html>
